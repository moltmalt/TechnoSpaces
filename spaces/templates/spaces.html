{% include "base.html" %}

{% load static %}

{% block content %}
<div class="container">
    <div class="search-filter-container">
        <div class="search-bar">
            <form method="GET" action="{% url 'spaces' %}">
                <input type="text" name="search" placeholder="Enter a space..." value="{{ request.GET.search }}">
                <button type="submit">
                    <img src="{% static 'src/magnifying-glass.svg' %}" alt="Search" width="16" height="16">
                </button>
            </form>
        </div>
    </div>

    <div class="category-filters">
        <form method="GET" action="{% url 'spaces' %}">
            <input type="hidden" name="search" value="{{ request.GET.search }}"> <!-- Preserve the search query -->
            <button type="submit" name="category" value="GLE Building">GLE Building</button>
            <button type="submit" name="category" value="RTL Building">RTL Building</button>
            <button type="submit" name="category" value="Library">University Library</button>
            <button type="submit" name="category" value="Major Event Spaces">Major Event Spaces</button>
            <button type="submit" name="category" value="">Clear Filter</button> <!-- Clear filter button -->
        </form>
        
    </div>
    
    <div class="spaces-list" id="spacesList">
        {% for space in spaces %}
            <div class="space-item" data-category="{{ space.venue|escape }}">
                <img src="{{ space.image_url }}" alt="{{ space.title }}">
                <h4>{{ space.title }}</h4>
                <p>{{ space.venue }}</p>
            </div>
        {% empty %}
            <p>No spaces found.</p>
        {% endfor %}
    </div>
</div>
{% endblock content %}

{% include "footer.html" %}